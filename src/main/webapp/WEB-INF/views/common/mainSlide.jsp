<%@page language="java" contentType="text/html; charset=UTF-8;"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>

<body>
	<div id="home_maincap_v7" class="carousel_container maincap">
		<!-- 슬라이드쇼 -->
		<div class="carousel_items cycle-slideshow slide">
			<!-- 현재 보이는 슬라이드이면 class 추가 "focus" -->
			<a class="store_main_capsule app_impression_tracked focus"
				data-manual-tracking="1" data-ds-appid="게임 번호" href="#게임 상세페이지">
				<%-- <c:url value="${pageContext.request.contextPath}/resources/public/test/main1.jpg"/> --%>
				<div class="capsule main_capsule"
					data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/main1.jpg"/>"
					style="background-image: url('${pageContext.request.contextPath}/resources/public/test/main1.jpg')">

					<!-- 마우스 올릴 경우 이미지 보이게 -->
					<!-- focus -->
					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
				</div>


				<div class="info">
					<div class="app_name">
						<div>게임 제목</div>
					</div>
					<div class="screenshots">
						<!-- div 2개 같은 줄을 위해 enter (x) -->
						<div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
						</div>
					</div>
					<div class="reason">
						<div class="main default">판매 중</div>
						<div class="additional">
							<div>최고의 인기 제품</div>
						</div>
					</div>
					<div class="discount_block  no_discount discount_block_inline">
						<div class="discount_prices">
							<div class="discount_final_price">₩ 10,500</div>
						</div>
					</div>
					<div class="platforms">
						<span class="platform_img win"></span> <span
							class="platform_img mac"></span> <span class="platform_img linux"></span>
					</div>
				</div>
			</a>
			<!-- 다음 슬라이드 -->
			<a class="store_main_capsule app_impression_tracked"
				data-manual-tracking="1" data-ds-appid="게임 번호" href="#게임 상세페이지">
				<%-- <c:url value="${pageContext.request.contextPath}/resources/public/test/main1.jpg"/> --%>
				<div class="capsule main_capsule"
					data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/main1.jpg"/>"
					style="background-image: url('${pageContext.request.contextPath}/resources/public/test/main1.jpg')">

					<!-- 마우스 올릴 경우 이미지 보이게 -->
					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/header_koreana.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/header_koreana.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/civili.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/civili.jpg"/>')"></div>

					<div class="screenshot"
						data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/paperplez.jpg"/>"
						style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/paperplez.jpg"/>')"></div>
				</div>


				<div class="info">
					<div class="app_name">
						<div>게임 제목</div>
					</div>
					<div class="screenshots">
						<!-- div 2개 같은 줄을 위해 enter (x) -->
						<div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/small2.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/header_koreana.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/header_koreana.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/civili.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/civili.jpg"/>')"></div>
						</div><div>
							<div
								data-background-image-url="<c:url value="${pageContext.request.contextPath}/resources/public/test/paperplez.jpg"/>"
								style="background-image: url('<c:url value="${pageContext.request.contextPath}/resources/public/test/paperplez.jpg"/>')"></div>
						</div>
					</div>
					<div class="reason">
						<div class="main default">판매 중</div>
						<div class="additional">
							<div>최고의 인기 제품</div>
						</div>
					</div>
					<div class="discount_block  no_discount discount_block_inline">
						<div class="discount_prices">
							<div class="discount_final_price">₩ 10,500</div>
						</div>
					</div>
					<div class="platforms">
						<span class="platform_img win"></span> <span
							class="platform_img mac"></span> <span class="platform_img linux"></span>
					</div>
				</div>
			</a> <a class="mySlides store_main_capsule app_impression_tracked"
				data-manual-tracking="2" data-ds-appid="게임 번호" href="#게임 상세페이지">
				test </a>
		</div>

		<div class="carousel_thumbs slidepos" data-usability="1">
			<!-- 슬라이드쇼 장 수 <div> class="focus" 보여지는 곳(색 다르게)-->
			<div class="demo focus"></div>
			<div class="demo"></div>
			<div class="demo"></div>
			<div class="demo"></div>
			<div class="demo"></div>
			<div class="demo"></div>
		</div>

		<!-- 슬라이드 이동 (화살표)버튼 -->
		<div class="arrow left" id="leftbtn" data-usability="1">
			<div></div>
		</div>
		<div class="arrow right" id="rightbtn" data-usability="1">
			<div></div>
		</div>
	</div>

	<script>			
		var idx = 0;
		var slidemax = 5;
				    
		function sliding(add) {
			idx = idx + add;
			if(idx < 0) idx = slidemax;
			else if(idx > slidemax) idx = 0;
			$('.demo').removeClass('focus');
			$('.demo').eq(idx).addClass('focus');
				        
			$('.slide > a').removeClass('focus');
			$('.slide > a').eq(idx).addClass('focus');
		}
				   
		autoslide = setInterval(function() { sliding(1) }, 3000);			    	
				   
		$(document).on('mouseenter', '.slide', function(){ // 슬라이드 이미지 마우스 오버시
			clearInterval(autoslide);			    	
		});
				     
				   
		$(document).on('mouseleave', '.slide', function(){ // 슬라이드 이미지 마우스 오버시
			setTimeout(function() {
				if($('.slide').is(':hover') === false){
					after();
				} else {
					clearInterval(autoslide);
				}
			}, 1000);
		});
					
		function after() {
			setTimeout(function() {
				clearInterval(autoslide);  
				autoslide = setInterval(function() { sliding(1) }, 3000);
			}, 2000);	
		}
				
		$('#leftbtn, #rightbtn').click(function() {
			clearInterval(autoslide);  
			if($(this).attr('id') == "leftbtn") sliding(-1);
			else sliding(1);
			after();
		});
				
		$('.slidepos > .demo').click(function() {
			$('.demo').removeClass('focus');
			$(this).addClass('focus');
			clearInterval(autoslide);
			idx = $(this).index(); 
			sliding(0);
			after();
		});
					
					
		$(document).on('mouseover', '.screenshots > div', function(){
			var screenshot = $(this).index();
			var currentSlide = $('.slide > a').eq(idx);
			currentSlide.find('.capsule > div').removeClass('focus');
			currentSlide.find('.capsule > div').eq(screenshot).addClass('focus');
		});
					
		$('.screenshots > div').mouseout(function(){
			$('.capsule > div').removeClass('focus');
		});
	</script>
	
</body>
</html>